<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Zelvora AI</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0a1020">

<style>
:root{
  --bg:#050b18;
  --panel:#0b1328;
  --glass:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12);
  --accent:#3bb3ff;
  --accent-soft:rgba(59,179,255,.25);
  --text:#e6ecff;
  --muted:#8fa0c9;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(1200px 600px at top,#0d1a38,#050b18);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  min-height:100vh;
}

/* Top bar */
header{
  position:fixed;
  top:0;
  width:100%;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:linear-gradient(to bottom,rgba(5,11,24,.95),rgba(5,11,24,.6));
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
  z-index:10;
}
header b{font-size:18px}
.status{color:var(--muted);font-size:13px}

/* Main */
main{
  padding:90px 16px 120px;
  max-width:700px;
  margin:auto;
}

/* Mode pills */
.modes{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding-bottom:8px;
}
.mode{
  padding:10px 16px;
  border-radius:999px;
  background:var(--glass);
  border:1px solid var(--border);
  color:var(--muted);
  white-space:nowrap;
  cursor:pointer;
  user-select:none;
}
.mode.active{
  background:var(--accent);
  color:#001428;
  font-weight:600;
}

/* Prompt box */
.card{
  margin-top:16px;
  background:linear-gradient(180deg,#0e1833,#0a1328);
  border:1px solid var(--border);
  border-radius:22px;
  padding:16px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}
textarea{
  width:100%;
  background:none;
  border:none;
  outline:none;
  resize:none;
  color:var(--text);
  font-size:16px;
  min-height:80px;
}

/* Buttons */
.btn{
  width:100%;
  margin-top:12px;
  padding:14px;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#3bb3ff,#1f6fff);
  color:#001428;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
.btn:disabled{opacity:.6}

/* Response */
.response{
  margin-top:14px;
  padding:14px;
  border-radius:16px;
  background:rgba(59,179,255,.08);
  border:1px solid var(--accent-soft);
  display:none;
}

/* Error */
.error{
  margin-top:14px;
  padding:14px;
  border-radius:16px;
  background:rgba(255,100,100,.1);
  border:1px solid rgba(255,100,100,.3);
  color:#ffb4b4;
  display:none;
}

/* Voice ring */
.voice-wrap{
  position:fixed;
  bottom:72px;
  left:50%;
  transform:translateX(-50%);
}
.voice{
  width:74px;
  height:74px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#7dd3ff,#1f6fff);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  color:#001428;
  box-shadow:0 0 0 0 rgba(59,179,255,.5);
  animation:pulse 2s infinite;
  cursor:pointer;
}
.voice.listening{
  animation:pulse-fast 1s infinite;
}

@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(59,179,255,.5)}
  70%{box-shadow:0 0 0 20px rgba(59,179,255,0)}
  100%{box-shadow:0 0 0 0 rgba(59,179,255,0)}
}
@keyframes pulse-fast{
  0%{box-shadow:0 0 0 0 rgba(59,179,255,.7)}
  70%{box-shadow:0 0 0 30px rgba(59,179,255,0)}
  100%{box-shadow:0 0 0 0 rgba(59,179,255,0)}
}

/* Bottom nav */
nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:rgba(5,11,24,.95);
  border-top:1px solid var(--border);
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}
nav span{color:var(--muted);font-size:13px}
nav .active{color:var(--accent)}
</style>
</head>

<body>

<header>
  <b>Zelvora AI</b>
  <span id="status" class="status">Online</span>
</header>

<main>

<div class="modes">
  <div class="mode active" data-mode="general">General</div>
  <div class="mode" data-mode="english">English</div>
  <div class="mode" data-mode="academic">Academic</div>
  <div class="mode" data-mode="exam">Exam</div>
  <div class="mode" data-mode="startup">Startup</div>
</div>

<div class="card">
  <textarea id="prompt" placeholder="Ask or speak naturally‚Ä¶"></textarea>
  <button id="ask" class="btn">Ask AI</button>
</div>

<div id="response" class="response"></div>
<div id="error" class="error"></div>

</main>

<div class="voice-wrap">
  <div id="voiceBtn" class="voice">üéôÔ∏è</div>
</div>

<nav>
  <span class="active">Home</span>
  <span>Tutor</span>
  <span>Voice</span>
  <span>Profile</span>
</nav>

<script>
/* MODE */
let mode="general";
document.querySelectorAll(".mode").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".mode").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    mode=b.dataset.mode;
  }
});

/* AI CALL */
const askBtn=document.getElementById("ask");
const promptEl=document.getElementById("prompt");
const resBox=document.getElementById("response");
const errBox=document.getElementById("error");

askBtn.onclick=async()=>{
  const text=promptEl.value.trim();
  if(!text) return;

  askBtn.disabled=true;
  askBtn.textContent="Thinking‚Ä¶";
  errBox.style.display="none";
  resBox.style.display="block";
  resBox.textContent="Zelvora is thinking‚Ä¶";

  try{
    const r=await fetch("https://zelvora-ai.zelvora-global.workers.dev",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({prompt:text,mode})
    });
    const d=await r.json();
    resBox.textContent=d.reply;
  }catch(e){
    resBox.style.display="none";
    errBox.style.display="block";
    errBox.textContent="AI unavailable. Please try again.";
    document.getElementById("status").textContent="Offline";
  }

  askBtn.disabled=false;
  askBtn.textContent="Ask AI";
};

/* CONTINUOUS VOICE */
let listening=false;
let recog;
if("webkitSpeechRecognition"in window){
  recog=new webkitSpeechRecognition();
  recog.continuous=true;
  recog.interimResults=true;
  recog.lang="en-US";

  recog.onresult=e=>{
    let t="";
    for(let i=e.resultIndex;i<e.results.length;i++){
      t+=e.results[i][0].transcript;
    }
    promptEl.value=t;
  };

  recog.onend=()=>{ if(listening) recog.start(); };
}

document.getElementById("voiceBtn").onclick=()=>{
  if(!recog) return alert("Voice not supported");
  listening=!listening;
  document.getElementById("voiceBtn").classList.toggle("listening",listening);
  if(listening) recog.start(); else recog.stop();
};
</script>

<script>
if("serviceWorker"in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
